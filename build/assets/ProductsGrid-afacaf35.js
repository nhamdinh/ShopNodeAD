import{j as s}from"./mui-2493782d.js";import{P as v}from"./PageHeader-9a1c2c49.js";import{C as y,P as C}from"./ProductGridItem-790f11ba.js";import{S as f}from"./index-fea9c701.js";import{P as G}from"./Pagination-94a491c8.js";import{r as a}from"./antd-1d728b6a.js";import{u as b}from"./usePagination-6afed751.js";import{P as h,j as P,m as E,n as N,p as j,q as B}from"./index-5836b459.js";import{b as O}from"./helpers-22670235.js";import"./DocumentTitle-62345d26.js";/* empty css               */import"./SubmenuTrigger-34b58daa.js";import"./RatingStars-c19bf1fe.js";import"./commonFunction-891b3414.js";const w=({products:n,cb_refetch:t,categories:d=[]})=>{const[r,l]=a.useState(d[0]),[i,m]=a.useState(h[0]),g=n.filter(e=>e==null?void 0:e.product_categories.includes(r.value)),u=O(g,i.value),o=b({data:u,limit:12});return a.useEffect(()=>{o.goToPage(0)},[r,i]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-[26px] lg:grid-cols-4 2xl:grid-cols-6",children:[s.jsx("div",{className:"card !p-5 flex items-center gap-4 min-w-[218px]",children:s.jsx(y,{category:r.label})}),s.jsxs("div",{className:`flex flex-col-reverse gap-4 lg:flex-col lg:gap-3 lg:col-start-3 lg:col-end-5\r
                     2xl:col-start-5 2xl:col-end-7`,children:[s.jsxs("span",{className:"lg:text-right",children:["View products: ",o.showingOf()]}),s.jsxs("div",{className:"grid gap-2.5 sm:grid-cols-2 sm:gap-[26px]",children:[s.jsx(f,{value:r,onChange:l,options:d}),s.jsx(f,{value:i,onChange:m,options:h})]})]})]}),s.jsx("div",{className:`grid flex-1 items-start gap-[26px] mt-5 mb-[30px] sm:grid-cols-2 md:grid-cols-3 md:mt-7\r
                 lg:grid-cols-4 2xl:grid-cols-6`,children:o.currentItems().map((e,c)=>s.jsx(C,{product:e,index:c,cb_onGetProductsByShop:()=>{t&&t()}},`${e._id}-${i.value}-${r.value}`))}),o.maxPage>1&&s.jsx(G,{pagination:o})]})},k=()=>{const n=P(E),t=P(N),[d,r]=a.useState([]),[l,i]=a.useState({product_shop:t==null?void 0:t._id,limit:j,page:1});a.useEffect(()=>{i({product_shop:t==null?void 0:t._id,limit:j,page:1,isDelete:!1})},[t]);const[m,{isLoading:g,error:u}]=B(),o=async()=>{var x;const e=await m(l),c=e==null?void 0:e.data;if(c){const S=(x=c==null?void 0:c.metadata)==null?void 0:x.products;r(S.map(p=>{const _=p.isDelete?"trash":p.isPublished?"publish":"draft";return{...p,status:_}}))}};return a.useEffect(()=>{l.product_shop&&o()},[l]),s.jsxs(s.Fragment,{children:[s.jsx(v,{isFetching:g,cb_refetch:o,title:"Products Grid"}),s.jsx(w,{categories:n,products:d,cb_refetch:o})]})};export{k as default};
