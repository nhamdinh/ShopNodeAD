import{j as e}from"./mui-8fd662bb.js";import{G as C,R as I,b as te,u as ae,m as le,n as ce,D as f,p as ne,j as M,k as L,o as V}from"./index-b16fa0e1.js";/* empty css              */import{r as c,S as oe,I as r,y as de,D as re,C as ue,z as g}from"./antd-d08f3b3b.js";import{h as y}from"./moment-a9aaa855.js";import{P as ie}from"./PageHeader-f00a72fe.js";import"./DocumentTitle-15585915.js";function me({variant:l,cb_delTable:m,cb_setTable:d}){const[p,S]=c.useState(Object.keys(C).map(o=>({label:e.jsx("div",{className:"opt-lbl",children:e.jsx("span",{children:C[o]})}),value:o})));return e.jsxs("div",{className:"w300px Variant__comp",children:[e.jsx(oe,{style:{width:94},className:"country__select mr2px w200px",options:p,value:l==null?void 0:l.label,onChange:o=>{d(l==null?void 0:l.id,"label",o)}}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"product_price",className:"form-label",children:"Price"}),e.jsx(r,{className:"form-control rounded search !h-[44px] w-full",type:"number",placeholder:"Price",readOnly:!0,value:l==null?void 0:l.price})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"product_price",className:"form-label",children:"SỐ LƯỢNG"}),e.jsx(r,{className:"form-control rounded search !h-[44px] w-full",type:"number",placeholder:"so luong",required:!0,allowClear:!0,value:l==null?void 0:l.quantity,onChange:o=>{const u=o.target.value;u.length<7&&(!u||u.match(I))&&d(l==null?void 0:l.id,"quantity",u)}})]}),e.jsx("button",{type:"submit",className:"btn btn--outline red",onClick:()=>{m(l==null?void 0:l.id)},children:"Xóa"})]})}function he(){const l=te(),m=ae(),d=le(),[p,S]=c.useState(""),[o,u]=c.useState(!0),[pe,_]=c.useState({}),[z,{isLoading:xe,error:be}]=ce(),Y=async t=>{const a=await z(t),n=a==null?void 0:a.data;if(n){const s=n==null?void 0:n.metadata;J(y(new Date(w),f)),T(s==null?void 0:s.sellDate),G(s==null?void 0:s.buyName),D(s==null?void 0:s.address),F(s==null?void 0:s.phone),k(s==null?void 0:s.metadata),A((s==null?void 0:s.discount)??0),U(s!=null&&s.isPaid?1:2),h(s==null?void 0:s.orderItems),u(s==null?void 0:s.isBan),B((s==null?void 0:s.isGif)??!1),_(s)}};c.useEffect(()=>{var t;if(((t=d.pathname.split("/"))==null?void 0:t.length)>2){const a=d.pathname.split("/")[2];Y({id:a}),S(a)}},[d.pathname]);const $=t=>{console.log("radio checked",t.target.value),U(t.target.value)},[X,J]=c.useState(y(new Date(Date.now()),f)),[w,T]=c.useState(y(new Date).format(f)),[O,B]=c.useState(!1),[x,G]=c.useState(""),[P,D]=c.useState(""),[E,F]=c.useState(""),[H,k]=c.useState(""),[q,A]=c.useState(0),[R,U]=c.useState(1),[i,h]=c.useState([]),K=(t,a)=>{T(a)},b=()=>x&&i.length>0,[Q,{isLoading:W,error:Ne}]=ne(),Z=async t=>{const a=await Q(t),n=a==null?void 0:a.data;n?(console.log(n),l(-1),m(V({isOpen:Date.now(),content:"updated ĐƠN Success",step:1}))):m(V({isOpen:Date.now(),content:"updated ĐƠN Failed",step:2}))},ee=t=>{t.preventDefault(),b()&&Z({id:p,objectParams:{buyName:x,isGif:O,discount:q,sellDate:w,metadata:H,address:P,phone:E,isPaid:R===1,isDelivered:!0,orderItems:[...i]}})},se=t=>{B(t.target.checked)};return e.jsxs("section",{className:"content-main",children:[e.jsx(ie,{isFetching:!1,title:`CHI TIẾT ĐƠN ${d.search.split("=")[1]==="true"?" BÁN":" NHẬP"}`}),e.jsx("div",{className:"card mb-4 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("button",{type:"submit",className:`btn btn--primary ${b()?"":"cursor__not"}`,onClick:ee,disabled:!b(),children:[W&&e.jsx(de,{size:"large"}),"Publish now"]}),e.jsxs("div",{className:"mb-4 mt20px",children:[e.jsx("label",{htmlFor:"product_title",className:"form-label"}),e.jsx(re,{allowClear:!1,defaultValue:X,onChange:K})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"form-label",children:"TÊN"}),e.jsx(r,{className:"form-control rounded search !h-[44px] w300px mt-2",allowClear:!0,required:!0,type:"text",placeholder:"TÊN",id:"product_title",value:x,onChange:t=>G(t.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"form-label",children:"BIẾU"}),e.jsx("div",{children:e.jsx(ue,{checked:O,onChange:se,children:e.jsx("h6",{children:"BIẾU"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"form-label",children:"THANH TOÁN"}),e.jsx("div",{children:e.jsxs(g.Group,{onChange:$,value:R,children:[e.jsx(g,{value:1,children:e.jsx("h6",{children:"RỒI"})}),e.jsx(g,{value:2,children:e.jsx("h6",{children:"CHƯA"})})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"form-label",children:"ĐỊA CHỈ"}),e.jsx(r,{className:"form-control rounded search !h-[44px] w300px mt-2",allowClear:!0,type:"text",placeholder:"ĐỊA CHỈ",id:"product_title",required:!0,value:P,onChange:t=>D(t.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"form-label",children:"SĐT"}),e.jsx(r,{className:"form-control rounded search !h-[44px] w300px mt-2",allowClear:!0,type:"text",placeholder:"SĐT",id:"product_title",required:!0,value:E,onChange:t=>{let a=t.target.value;a.length<13&&(!a||a.match(I))&&F(t.target.value)}})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"form-label",children:"GIẢM GIÁ"}),e.jsx(r,{className:"form-control rounded search !h-[44px] w300px mt-2",allowClear:!0,type:"number",placeholder:"GIẢM GIÁ",id:"product_title",required:!0,value:q,onChange:t=>{const a=t.target.value;a.length<7&&(!a||a.match(I))&&A(t.target.value)}})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"form-label",children:"NOTE"}),e.jsx(r,{className:"form-control rounded search !h-[44px] w300px mt-2",allowClear:!0,type:"text",placeholder:"NOTE",id:"product_title",required:!0,value:H,onChange:t=>{k(t.target.value)}})]}),e.jsx("button",{type:"submit",className:"btn btn--social",onClick:()=>{h([{id:Date.now(),label:"BAP_CUON",price:o?M.BAP_CUON:L.BAP_CUON,quantity:1},...i])},children:"THÊM"}),e.jsx("div",{className:"mt20px dataTable",children:i.map(t=>e.jsx(me,{variant:t,cb_delTable:a=>{h(i.filter(n=>(n==null?void 0:n.id)!==a))},cb_setTable:(a,n,s)=>{h(i.map(v=>{const N={...v};return v.id===a&&(N[n]=s,Object.keys(C).map(j=>{s===j&&(N.price=o?M[j]:L[j])})),N}))}},t==null?void 0:t.id))})]})})]})}function we(){return e.jsx(he,{})}export{we as default};
