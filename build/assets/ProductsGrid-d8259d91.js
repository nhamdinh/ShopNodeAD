import{j as s}from"./mui-2493782d.js";import{P as v}from"./PageHeader-8dc226f4.js";import{C,P as E}from"./ProductGridItem-1cafb495.js";import{S as f}from"./index-8d8d8ff4.js";import{P as G}from"./Pagination-94a491c8.js";import{r as i}from"./antd-1d728b6a.js";import{u as b}from"./usePagination-6afed751.js";import{P as h,j as P,m as N,n as y,p as j,q as B}from"./index-f5793006.js";import{b as O}from"./helpers-22670235.js";import"./DocumentTitle-62345d26.js";/* empty css               */import"./SubmenuTrigger-34b58daa.js";import"./RatingStars-632e9c20.js";import"./commonFunction-f8b3aaf0.js";const w=({products:n,cb_refetch:e,categories:c=[]})=>{const[t,l]=i.useState(c[0]),[o,m]=i.useState(h[0]),p=n.filter(r=>r==null?void 0:r.product_categories.includes(t==null?void 0:t.value)),u=O(p,o==null?void 0:o.value),a=b({data:u,limit:12});return i.useEffect(()=>{a.goToPage(0)},[t,o]),i.useEffect(()=>{l(c[0])},[c]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-[26px] lg:grid-cols-4 2xl:grid-cols-6",children:[s.jsx("div",{className:"card !p-5 flex items-center gap-4 min-w-[218px]",children:s.jsx(C,{category:t==null?void 0:t.label})}),s.jsxs("div",{className:`flex flex-col-reverse gap-4 lg:flex-col lg:gap-3 lg:col-start-3 lg:col-end-5\r
                     2xl:col-start-5 2xl:col-end-7`,children:[s.jsxs("span",{className:"lg:text-right",children:["View products: ",a.showingOf()]}),s.jsxs("div",{className:"grid gap-2.5 sm:grid-cols-2 sm:gap-[26px]",children:[s.jsx(f,{value:t,onChange:l,options:c}),s.jsx(f,{value:o,onChange:m,options:h})]})]})]}),s.jsx("div",{className:`grid flex-1 items-start gap-[26px] mt-5 mb-[30px] sm:grid-cols-2 md:grid-cols-3 md:mt-7\r
                 lg:grid-cols-4 2xl:grid-cols-6`,children:a.currentItems().map((r,d)=>s.jsx(E,{product:r,index:d,cb_onGetProductsByShop:()=>{e&&e()}},`${r._id}-${o==null?void 0:o.value}-${t==null?void 0:t.value}`))}),a.maxPage>1&&s.jsx(G,{pagination:a})]})},k=()=>{const n=P(N),e=P(y),[c,t]=i.useState([]),[l,o]=i.useState({product_shop:e==null?void 0:e._id,limit:j,page:1});i.useEffect(()=>{o({product_shop:e==null?void 0:e._id,limit:j,page:1,isDelete:!1})},[e]);const[m,{isLoading:p,error:u}]=B(),a=async()=>{var x;const r=await m(l),d=r==null?void 0:r.data;if(d){const S=(x=d==null?void 0:d.metadata)==null?void 0:x.products;t(S.map(g=>{const _=g.isDelete?"trash":g.isPublished?"publish":"draft";return{...g,status:_}}))}};return i.useEffect(()=>{l.product_shop&&a()},[l]),s.jsxs(s.Fragment,{children:[s.jsx(v,{isFetching:p,cb_refetch:a,title:"Products Grid"}),s.jsx(w,{categories:n,products:c,cb_refetch:a})]})};export{k as default};
