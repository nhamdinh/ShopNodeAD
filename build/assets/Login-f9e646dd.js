import{j as h}from"./mui-2493782d.js";import{D as me}from"./DocumentTitle-62345d26.js";import{u as pe,a as he,b as fe,c as ve,L as ge,S as we,A as be,N as ke,d as _e,o as se,Q as ye}from"./index-5836b459.js";import{r as t,h as X,m as Ae}from"./antd-1d728b6a.js";import{P as xe}from"./PasswordInput-64148cfa.js";import{u as Se,C as je}from"./index.esm-f6aeb949.js";function D(){return(D=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(e[p]=l[p])}return e}).apply(this,arguments)}function le(e,s){(s==null||s>e.length)&&(s=e.length);for(var l=0,p=new Array(s);l<s;l++)p[l]=e[l];return p}var ae=window;t.memo(function(e){var s=e.state,l=s===void 0?"":s,p=e.client_id,j=e.className,g=e.redirect_uri,A=e.scope,k=A===void 0?"profile":A,L=e.isOnlyGetToken,w=L!==void 0&&L,P=e.scope_data,N=P===void 0?{profile:{essential:!0}}:P,_=e.response_type,x=_===void 0?"token":_,y=e.children,i=e.onReject,d=e.onResolve,c=e.onLoginStart,u=t.useRef(null),v=t.useState(!1),R=v[0],C=v[1];t.useEffect(function(){!R&&r()},[R]),t.useEffect(function(){return function(){u.current&&u.current.remove()}},[]);var S=t.useCallback(function(){return!!document.getElementById("amazon-login")},[]),m=t.useCallback(function(f,E,H,Q,I){E===void 0&&(E="script");var T=f.createElement(E);T.id=H,T.src=Q,T.async=!0,T.defer=!0;var z=document.getElementsByTagName("script")[0];u.current=T,z&&z.parentNode&&z.parentNode.insertBefore(T,z),T.onload=I},[]),a=t.useCallback(function(f){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+f.access_token}}).then(function(E){return E.json()}).then(function(E){d({provider:"amazon",data:D({},E,f)})}).catch(function(E){i(E)}).finally(function(){}),Promise.resolve()}catch(E){return Promise.reject(E)}},[i,d]),n=t.useCallback(function(f){w?d({provider:"amazon",data:D({},f)}):a(f)},[a,d,w]),o=t.useCallback(function(f){i(f)},[i]),r=t.useCallback(function(){S()?C(!0):m(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){ae.amazon.Login.setClientId(p),C(!0)})},[S,p,m]),b=t.useCallback(function(){R&&(ae.amazon?(c&&c(),ae.amazon.Login.authorize({scope:k,scope_data:N,response_type:x,redirect_uri:g,state:l},function(f){f.error?o(f.error):n(f)})):(r(),i("Google SDK isn't loaded!")))},[r,k,l,i,N,R,o,c,g,x,n]);return X.createElement("div",{className:j,onClick:b},y)});var ie=window,Ce=t.memo(function(e){var s=e.appId,l=e.scope,p=l===void 0?"email,public_profile":l,j=e.state,g=j===void 0||j,A=e.xfbml,k=A===void 0||A,L=e.cookie,w=L===void 0||L,P=e.version,N=P===void 0?"v2.7":P,_=e.language,x=_===void 0?"en_EN":_,y=e.auth_type,i=y===void 0?"":y,d=e.className,c=e.onLoginStart,u=e.onReject,v=e.onResolve,R=e.redirect_uri,C=e.fieldsProfile,S=C===void 0?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":C,m=e.response_type,a=m===void 0?"code":m,n=e.return_scopes,o=n===void 0||n,r=e.isOnlyGetToken,b=r!==void 0&&r,f=e.children,E=t.useRef(null),H=t.useState(!1),Q=H[0],I=H[1],T=t.useState(!1),z=T[0],O=T[1];t.useEffect(function(){!Q&&Z()},[Q]),t.useEffect(function(){return function(){E.current&&E.current.remove()}},[]);var B=t.useCallback(function(U,K){var M=U.createElement("script");M.id="facebook-jssdk",M.src="https://connect.facebook.net/en_EN/sdk.js";var G=U.getElementsByTagName("script")[0];G&&G.parentNode&&G.parentNode.insertBefore(M,G),K()},[]),W=t.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),Y=t.useCallback(function(U,K){var M=window;M.fbAsyncInit=function(){M.FB&&M.FB.init(D({},U)),I(!0);var G=K.getElementById("fb-root");G||((G=K.createElement("div")).id="fb-root",K.body.appendChild(G)),E.current=G}},[]),ee=t.useCallback(function(U){ie.FB.api("/me",{locale:x,fields:S},function(K){v({provider:"facebook",data:D({},U,K)})})},[S,x,v]),te=t.useCallback(function(U){console.log("🚀 ~ file: index.tsx:127 ~ response:",U),U.authResponse?b?v({provider:"facebook",data:D({},U.authResponse)}):ee(U.authResponse):u(U),O(!1)},[ee,b,u,v]),Z=t.useCallback(function(){W()?I(!0):B(document,function(){Y({appId:s,xfbml:k,version:N,state:g,cookie:w,redirect_uri:R,response_type:a},document)})},[g,s,k,w,N,Y,R,a,B,W]),$=t.useCallback(function(){Q&&!z&&(ie.FB?(O(!0),c&&c(),ie.FB.login(te,{scope:p,return_scopes:o,auth_type:i})):(Z(),u("Fb isn't loaded!"),O(!1)))},[Z,p,u,i,Q,c,z,o,te]);return X.createElement("div",{className:d,onClick:$},f)}),V="875c0462-6309-4ddf-9889-5227b1acc82c",ne=window,Ee=t.memo(function(e){var s=e.client_id,l=e.scope,p=l===void 0?"https://www.googleapis.com/auth/userinfo.profile":l,j=e.prompt,g=j===void 0?"select_account":j,A=e.typeResponse,k=A===void 0?"accessToken":A,L=e.ux_mode,w=e.className,P=w===void 0?"":w,N=e.login_hint,_=N===void 0?"":N,x=e.access_type,y=x===void 0?"online":x,i=e.onLoginStart,d=e.onReject,c=e.onResolve,u=e.redirect_uri,v=u===void 0?"/":u,R=e.auto_select,C=R!==void 0&&R,S=e.isOnlyGetToken,m=S!==void 0&&S,a=e.cookie_policy,n=a===void 0?"single_host_origin":a,o=e.hosted_domain,r=o===void 0?"":o,b=e.discoveryDocs,f=b===void 0?"":b,E=e.children,H=e.fetch_basic_profile,Q=H===void 0||H,I=t.useRef(null),T=t.useState(!1),z=T[0],O=T[1],B=t.useState(null),W=B[0],Y=B[1];t.useEffect(function(){!z&&K()},[z]),t.useEffect(function(){return function(){I.current&&I.current.remove()}},[]);var ee=t.useCallback(function(){return!!document.getElementById("google-login")},[]),te=t.useCallback(function(G,J,F,oe,ue){J===void 0&&(J="script");var q=G.createElement(J);q.id=F,q.src=oe,q.async=!0,q.defer=!0;var re=document.getElementsByTagName("script")[0];I.current=q,re&&re.parentNode&&re.parentNode.insertBefore(q,re),q.onload=ue},[]),Z=t.useCallback(function(G){if(k==="accessToken"){var J=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V,Authorization:"Bearer "+G.access_token});fetch("https://cors.bridged.cc/https://www.googleapis.com/oauth2/v3/userinfo?alt=json",{method:"GET",headers:J}).then(function(F){return F.json()}).then(function(F){var oe=D({},G,F);c({provider:"google",data:oe})}).catch(function(F){d(F)})}else fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?id_token="+G.credential,{method:"GET"}).then(function(F){return F.json()}).then(function(F){var oe=D({},G,F);c({provider:"google",data:oe})}).catch(function(F){d(F)})},[k,d,c]),$=t.useCallback(function(G){G&&y==="offline"||m?c({provider:"google",data:G}):Z(G)},[y,m,Z,c]),U=t.useCallback(function(G){d({provider:"google",data:G})},[d]),K=t.useCallback(function(){ee()?O(!0):te(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var G={client_id:s,ux_mode:L},J=null;if(k==="idToken")ne.google.accounts.id.initialize(D({},G,{auto_select:C,prompt:"select_account",login_uri:v,callback:$,native_callback:$,error_callback:U}));else{var F=D({},G,{scope:p,prompt:g,login_hint:_,access_type:y,hosted_domain:r,redirect_uri:v,cookie_policy:n,discoveryDocs:f,immediate:!0,fetch_basic_profile:Q,callback:$,error_callback:U});J=y==="offline"?ne.google.accounts.oauth2.initCodeClient(F):ne.google.accounts.oauth2.initTokenClient(F)}J&&Y(J),O(!0)})},[p,g,L,s,_,C,y,v,k,f,n,r,$,U,Q,te,ee]),M=t.useCallback(function(){z&&(ne.google?(i&&i(),W?y==="offline"?W.requestCode():W.requestAccessToken():ne.google.accounts.id.prompt()):(K(),d("Google SDK isn't loaded!")))},[y,W,z,K,i,d]);return X.createElement("div",{className:P,onClick:M},E)});t.memo(function(e){var s=e.state,l=s===void 0?"":s,p=e.scope,j=p===void 0?"repo,gist":p,g=e.client_id,A=e.client_secret,k=e.className,L=k===void 0?"":k,w=e.redirect_uri,P=e.allow_signup,N=P!==void 0&&P,_=e.isOnlyGetToken,x=_!==void 0&&_,y=e.isOnlyGetCode,i=y!==void 0&&y,d=e.children,c=e.onReject,u=e.onResolve,v=e.onLoginStart;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_github")&&o&&(localStorage.setItem("github",o),window.close())},[]);var R=t.useCallback(function(n){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+n.access_token,"x-cors-grida-api-key":V}}).then(function(o){return o.json()}).then(function(o){u({provider:"github",data:D({},o,n)})}).catch(function(o){c(o)})},[c,u]),C=t.useCallback(function(n){if(i)u({provider:"github",data:{code:n}});else{var o={code:n,state:l,redirect_uri:w,client_id:g,client_secret:A},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(b){return b.text()}).then(function(b){for(var f,E={},H=function(I,T){var z;if(typeof Symbol>"u"||I[Symbol.iterator]==null){if(Array.isArray(I)||(z=function(B,W){if(B){if(typeof B=="string")return le(B,void 0);var Y=Object.prototype.toString.call(B).slice(8,-1);return Y==="Object"&&B.constructor&&(Y=B.constructor.name),Y==="Map"||Y==="Set"?Array.from(B):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?le(B,void 0):void 0}}(I))){z&&(I=z);var O=0;return function(){return O>=I.length?{done:!0}:{done:!1,value:I[O++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(z=I[Symbol.iterator]()).next.bind(z)}(new URLSearchParams(b));!(f=H()).done;){var Q=f.value;E[Q[0]]=Q[1]}E.access_token?x?u({provider:"github",data:E}):R(E):c("no data")}).catch(function(b){c(b)})}},[l,c,R,u,g,w,A,i,x]),S=t.useCallback(function(n){var o=n.type,r=n.code,b=n.provider;try{return Promise.resolve(o==="code"&&b==="github"&&r&&C(r))}catch(f){return Promise.reject(f)}},[C]),m=t.useCallback(function(){window.removeEventListener("storage",m,!1);var n=localStorage.getItem("github");n&&(S({provider:"github",type:"code",code:n}),localStorage.removeItem("github"))},[S]),a=t.useCallback(function(){v&&v(),window.addEventListener("storage",m,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+g+"&scope="+j+"&state="+l+"_github&redirect_uri="+w+"&allow_signup="+N,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[j,l,g,w,N,v,m]);return X.createElement("div",{className:L,onClick:a},d)});t.memo(function(e){var s=e.state,l=s===void 0?"":s,p=e.client_id,j=e.client_secret,g=e.className,A=e.redirect_uri,k=e.fields,L=k===void 0?"id,username,account_type,media_count":k,w=e.scope,P=w===void 0?"user_profile,user_media":w,N=e.response_type,_=N===void 0?"code":N,x=e.isOnlyGetCode,y=x!==void 0&&x,i=e.isOnlyGetToken,d=i!==void 0&&i,c=e.children,u=e.onReject,v=e.onResolve,R=e.onLoginStart;t.useEffect(function(){var o=new URL(window.location.href),r=o.searchParams.get("code"),b=o.searchParams.get("state");b!=null&&b.includes("_instagram")&&r&&(localStorage.setItem("instagram",r),window.close())},[]);var C=t.useCallback(function(o){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields="+L+"&access_token="+o.access_token,{method:"GET",headers:{"x-cors-grida-api-key":V}}).then(function(r){return r.json()}).then(function(r){v({provider:"instagram",data:D({},r,o)})}).catch(function(r){u(r)})},[L,u,v]),S=t.useCallback(function(o){if(y)v({provider:"instagram",data:{code:o}});else{var r={grant_type:"authorization_code",code:o,redirect_uri:A,client_id:p,client_secret:j},b=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:b,body:new URLSearchParams(r)}).then(function(f){return f.json()}).then(function(f){f.access_token?d?v({provider:"instagram",data:f}):C(f):u("no data")}).catch(function(f){u(f)}).finally(function(){})}},[u,v,C,p,A,j,y,d]),m=t.useCallback(function(o){var r=o.type,b=o.code,f=o.provider;try{return Promise.resolve(r==="code"&&f==="instagram"&&b&&S(b))}catch(E){return Promise.reject(E)}},[S]),a=t.useCallback(function(){window.removeEventListener("storage",a,!1);var o=localStorage.getItem("instagram");o&&(m({provider:"instagram",type:"code",code:o}),localStorage.removeItem("instagram"))},[m]),n=t.useCallback(function(){R&&R(),window.addEventListener("storage",a,!1);var o=window.screen.width/2-225,r=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+_+"&client_id="+p+"&scope="+P+"&state="+l+"_instagram&redirect_uri="+A,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+r+", left="+o)},[P,l,p,A,R,_,a]);return X.createElement("div",{className:g,onClick:n},c)});t.memo(function(e){var s=e.tenant,l=s===void 0?"common":s,p=e.state,j=p===void 0?"":p,g=e.client_id,A=e.className,k=e.redirect_uri,L=e.scope,w=L===void 0?"profile openid email":L,P=e.response_type,N=P===void 0?"code":P,_=e.response_mode,x=_===void 0?"query":_,y=e.children,i=e.code_challenge,d=i===void 0?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":i,c=e.code_challenge_method,u=c===void 0?"plain":c,v=e.prompt,R=v===void 0?"select_account":v,C=e.isOnlyGetCode,S=C!==void 0&&C,m=e.isOnlyGetToken,a=m!==void 0&&m,n=e.onLoginStart,o=e.onReject,r=e.onResolve;t.useEffect(function(){var I=new URL(window.location.href),T=I.searchParams.get("code"),z=I.searchParams.get("state");z!=null&&z.includes("_microsoft")&&T&&(localStorage.setItem("microsoft",T),window.close())},[]);var b=t.useCallback(function(I){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+I.access_token}}).then(function(T){return T.json()}).then(function(T){r({provider:"microsoft",data:D({},T,I)})}).catch(function(T){o(T)})},[o,r]),f=t.useCallback(function(I){if(S)r({provider:"microsoft",data:{code:I}});else{var T={code:I,scope:w,client_id:g,redirect_uri:k,code_verifier:d,grant_type:"authorization_code"},z=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+l+"/oauth2/v2.0/token",{method:"POST",headers:z,body:new URLSearchParams(T)}).then(function(O){return O.json()}).then(function(O){O.access_token?a?r({provider:"microsoft",data:O}):b(O):o("no data")}).catch(function(O){o(O)})}},[w,l,o,b,g,r,k,d,S,a]),E=t.useCallback(function(I){var T=I.type,z=I.code,O=I.provider;try{return Promise.resolve(T==="code"&&O==="microsoft"&&z&&f(z))}catch(B){return Promise.reject(B)}},[f]),H=t.useCallback(function(){window.removeEventListener("storage",H,!1);var I=localStorage.getItem("microsoft");I&&(E({provider:"microsoft",type:"code",code:I}),localStorage.removeItem("microsoft"))},[E]),Q=t.useCallback(function(){n&&n(),window.addEventListener("storage",H,!1);var I=window.screen.width/2-225,T=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+l+"/oauth2/v2.0/authorize?client_id="+g+`
        &response_type=`+N+`
        &redirect_uri=`+k+`
        &response_mode=`+x+`
        &scope=`+w+`
        &state=`+j+`_microsoft
        &prompt=`+R+`
        &code_challenge=`+d+`
        &code_challenge_method=`+u,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+T+", left="+I)},[w,j,R,l,g,n,k,x,N,d,H,u]);return X.createElement("div",{className:A,onClick:Q},y)});t.memo(function(e){var s=e.state,l=s===void 0?"":s,p=e.scope,j=p===void 0?"r_liteprofile":p,g=e.client_id,A=e.client_secret,k=e.className,L=k===void 0?"":k,w=e.redirect_uri,P=e.response_type,N=P===void 0?"code":P,_=e.isOnlyGetCode,x=_!==void 0&&_,y=e.isOnlyGetToken,i=y!==void 0&&y,d=e.children,c=e.onLoginStart,u=e.onReject,v=e.onResolve;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_linkedin")&&o&&(localStorage.setItem("linkedin",o),window.close())},[]);var R=t.useCallback(function(n){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+n.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(o){return o.json()}).then(function(o){var r=D({},n);if(o.contents){var b=JSON.parse(o.contents);typeof n=="object"&&Object.entries(b).map(function(f){r[f[0]]=f[1]})}v({provider:"linkedin",data:r})}).catch(function(o){u(o)})},[u,v]),C=t.useCallback(function(n){if(x)v({provider:"linkedin",data:{code:n}});else{var o={code:n,grant_type:"authorization_code",redirect_uri:w,client_id:g,client_secret:A},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(b){return b.json()}).then(function(b){i?v({provider:"linkedin",data:b}):R(b)}).catch(function(b){u(b)})}},[u,v,g,R,w,A,x,i]),S=t.useCallback(function(n){var o=n.type,r=n.code,b=n.provider;try{return Promise.resolve(o==="code"&&b==="linkedin"&&r&&C(r))}catch(f){return Promise.reject(f)}},[C]),m=t.useCallback(function(){window.removeEventListener("storage",m,!1);var n=localStorage.getItem("linkedin");n&&(S({provider:"linkedin",type:"code",code:n}),localStorage.removeItem("linkedin"))},[S]),a=t.useCallback(function(){c&&c(),window.addEventListener("storage",m,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+N+"&client_id="+g+"&scope="+j+"&state="+l+"_linkedin&redirect_uri="+w,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[c,m,N,g,j,l,w]);return X.createElement("div",{className:L,onClick:a},d)});t.memo(function(e){var s=e.state,l=s===void 0?"":s,p=e.scope,j=p===void 0?"boards:read,pins:read,user_accounts:read":p,g=e.client_id,A=e.client_secret,k=e.className,L=k===void 0?"":k,w=e.redirect_uri,P=e.isOnlyGetCode,N=P!==void 0&&P,_=e.isOnlyGetToken,x=_!==void 0&&_,y=e.children,i=e.onLoginStart,d=e.onReject,c=e.onResolve;t.useEffect(function(){var m=new URL(window.location.href),a=m.searchParams.get("code"),n=m.searchParams.get("state");n!=null&&n.includes("_pinterest")&&a&&(localStorage.setItem("pinterest",a),window.close())},[]);var u=t.useCallback(function(m){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+m.access_token,"x-cors-grida-api-key":V}}).then(function(a){return a.json()}).then(function(a){c({provider:"pinterest",data:D({},m,a)})}).catch(function(a){return d(a)})},[d,c]),v=t.useCallback(function(m){try{var a=function(){if(!N){var n={code:m,redirect_uri:w,grant_type:"authorization_code"},o=[];for(var r in n){var b=encodeURIComponent(r),f=encodeURIComponent(n[r]);o.push(b+"="+f)}return o=o.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(g+":"+A),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V},body:o}).then(function(E){return E.json()}).catch(function(E){return d(E)})).then(function(E){E.access_token&&(x?c({provider:"pinterest",data:E}):u(E))})}c({provider:"pinterest",data:{code:m}})}();return Promise.resolve(a&&a.then?a.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},[d,g,u,c,w,A,N,x]),R=t.useCallback(function(m){var a=m.type,n=m.code,o=m.provider;try{return Promise.resolve(a==="code"&&o==="pinterest"&&n&&v(n))}catch(r){return Promise.reject(r)}},[v]),C=t.useCallback(function(){window.removeEventListener("storage",C,!1);var m=localStorage.getItem("pinterest");m&&(R({provider:"pinterest",type:"code",code:m}),localStorage.removeItem("pinterest"))},[R]),S=t.useCallback(function(){i&&i(),window.addEventListener("storage",C,!1);var m=window.screen.width/2-225,a=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+g+"&scope="+j+"&state="+l+"_pinterest&redirect_uri="+w+"&response_type=code","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+a+", left="+m)},[j,l,g,w,i,C]);return X.createElement("div",{className:L,onClick:S},y)});t.memo(function(e){var s=e.client_id,l=e.className,p=l===void 0?"":l,j=e.redirect_uri,g=e.children,A=e.fields,k=A===void 0?"created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld":A,L=e.state,w=L===void 0?"state":L,P=e.scope,N=P===void 0?"users.read%20tweet.read":P,_=e.isOnlyGetCode,x=_!==void 0&&_,y=e.isOnlyGetToken,i=y!==void 0&&y,d=e.onLoginStart,c=e.onReject,u=e.onResolve;t.useEffect(function(){var a=new URL(window.location.href),n=a.searchParams.get("code");a.searchParams.get("state")&&n&&(localStorage.setItem("twitter",""+n),window.close())},[]);var v=t.useCallback(function(a){fetch("https://cors.bridged.cc/https://api.twitter.com/2/users/me?user.fields="+k,{method:"GET",headers:{Authorization:"Bearer "+a.access_token,"x-cors-grida-api-key":V}}).then(function(n){return n.json()}).then(function(n){u({provider:"twitter",data:D({},a,n.data)})}).catch(function(n){return c(n)})},[k,c,u]),R=t.useCallback(function(a){try{var n=function(){if(!x){var o=new URLSearchParams({code:a,redirect_uri:j,client_id:s,grant_type:"authorization_code",code_verifier:"challenge"});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/2/oauth2/token",{method:"POST",body:o,headers:{"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":V}}).then(function(r){return r.json()}).catch(function(r){return c(r)})).then(function(r){r.access_token&&(i?u({provider:"twitter",data:r}):v(r))})}u({provider:"twitter",data:{code:a}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},[c,v,u,s,j,x,i]),C=t.useCallback(function(a){var n=a.type,o=a.code,r=a.provider;try{return Promise.resolve(n==="code"&&r==="twitter"&&o&&R(o))}catch(b){return Promise.reject(b)}},[R]),S=t.useCallback(function(){window.removeEventListener("storage",S,!1);var a=localStorage.getItem("twitter");a&&(C({provider:"twitter",type:"code",code:a}),localStorage.removeItem("twitter"))},[C]),m=t.useCallback(function(){try{d&&d(),window.addEventListener("storage",S,!1);var a=window.screen.width/2-225,n=window.screen.height/2-365;return window.open("https://twitter.com/i/oauth2/authorize?response_type=code&client_id="+s+"&redirect_uri="+j+"&scope="+N+"&state="+w+"&code_challenge=challenge&code_challenge_method=plain","twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+a),Promise.resolve()}catch(o){return Promise.reject(o)}},[N,w,s,d,j,S]);return X.createElement("div",{className:p,onClick:m},g)});typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var ce=window;t.memo(function(e){var s=e.client_id,l=e.scope,p=l===void 0?"name email":l,j=e.className,g=j===void 0?"":j,A=e.onLoginStart,k=e.onReject,L=e.onResolve,w=e.redirect_uri,P=w===void 0?"/":w,N=e.children,_=t.useRef(null),x=t.useState(!1),y=x[0],i=x[1];t.useEffect(function(){!y&&v()},[y]),t.useEffect(function(){return function(){_.current&&_.current.remove()}},[]);var d=t.useCallback(function(){return!!document.getElementById("apple-login")},[]),c=t.useCallback(function(C,S,m,a,n){S===void 0&&(S="script");var o=C.createElement(S);o.id=m,o.src=a,o.async=!0,o.defer=!0;var r=document.getElementsByTagName("script")[0];_.current=o,r&&r.parentNode&&r.parentNode.insertBefore(o,r),o.onload=n},[]),u=t.useCallback(function(C){L({provider:"apple",data:C})},[L]),v=t.useCallback(function(){d()?i(!0):c(document,"script","apple-login","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",function(){ce.AppleID.auth.init({clientId:s,scope:p,redirectURI:P,state:"origin:web",usePopup:!0}),i(!0)})},[p,s,P,c,d]),R=t.useCallback(function(){try{if(!y)return Promise.resolve();var C=function(){if(ce.AppleID){A&&A();var S=function(m,a){try{var n=Promise.resolve(ce.AppleID.auth.signIn()).then(function(o){u(o)})}catch(o){return a(o)}return n&&n.then?n.then(void 0,a):n}(0,function(m){k({err:m})});if(S&&S.then)return S.then(function(){})}else v(),k("Apple SDK isn't loaded!")}();return Promise.resolve(C&&C.then?C.then(function(){}):void 0)}catch(S){return Promise.reject(S)}},[u,y,v,A,k]);return X.createElement("div",{className:g,onClick:R},N)});t.memo(function(e){var s=e.state,l=s===void 0?"":s,p=e.scope,j=p===void 0?"user.info.basic":p,g=e.client_key,A=e.className,k=A===void 0?"":A,L=e.redirect_uri,w=e.children,P=e.onResolve,N=e.onLoginStart;t.useEffect(function(){var i=new URL(window.location.href),d=i.searchParams.get("code"),c=i.searchParams.get("state");c!=null&&c.includes("_tiktok")&&d&&(localStorage.setItem("tiktok",d),window.close())},[]);var _=t.useCallback(function(i){var d=i.type,c=i.code,u=i.provider;try{return Promise.resolve(d==="code"&&u==="tiktok"&&c&&P({provider:"tiktok",data:{code:c}}))}catch(v){return Promise.reject(v)}},[P]),x=t.useCallback(function(){window.removeEventListener("storage",x,!1);var i=localStorage.getItem("tiktok");i&&(_({provider:"tiktok",type:"code",code:i}),localStorage.removeItem("instagram"))},[_]),y=t.useCallback(function(){N&&N(),window.addEventListener("storage",x,!1);var i=window.screen.width/2-225,d=window.screen.height/2-365;window.open("https://www.tiktok.com/auth/authorize?client_key="+g+"&scope="+j+"&state="+l+"_tiktok&redirect_uri="+L+"&response_type=code","Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+d+", left="+i)},[j,l,g,L,N,x]);return X.createElement("div",{className:k,onClick:y},w)});const Ne="/assets/login-33fdac8a.webp",Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIdSURBVHgBlVJLTBNRFL33zXRKIWCtEeInfhADMUabFHGnI240EdP4SXTjZ+NSjDtjqhJiXEoMG10oK3ChQiIh0WApC42YNlF0Q4ymZVlEWixgZzrv+t6QkWn5n2TezLlzz7v3vncQSjChN+qWgmEFoIUAamWMIXzjBHEi9rAmOjLqzkfnY/Lk4Sqe522EcANWxiPTx29t60/M2pvLherqvJbJh9cgBiI4zXKeaoercknv8D9AgqArKSnafyzerz1IFQVgBxDotvzHuXJsS+xj8v8I1O+tnXza8INnNWeo9zOFilO7Y7GMu/KUHvQTK98QiH5IueNovPV0QV69NDe4Ff5+DaRKK6wGFRUIga+A5S3jwPZMd1denygSN7f/ubesGllCBYL9Di9rmIouSmJ4d9kNiHqYm3OgKlgHCPhGeQvfxbNXBgbyOw8C/OwtTsOuYhGFhXn88wTH0BhUO3Jca43kQjBiVGcMjdePnulNL1Wx+T7VEM3EEWG73THCFfapsPnl5cxRKZYxv5bHN02vwpuWaFgUnu10xNIsYJjDtpVD3Wc7kEHrQpuQZICdwK04V8FCix0C8l0r+32+XssetzXEqX0oUnnHJvqQrubSgXeiyBFYBVr2BHl/XfgynRprSjxpNNF1Ohh6fq4NkSIrbSAs/cyc4zc/X+3LzPMSBHvCu1RQImKkfcSFyVCcFdG4MP0AkdIXv/gi5s7/Bzda1AAj2ek/AAAAAElFTkSuQmCC",Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGXSURBVHgBnVM7T8JQFD6nEIHE8HDQuhiILk7WhTgYA5OjuLmaOBkTH4l00YCLCSExqPwBf4DRwR1WExM7uLkwShxK0aWY9nhuES21EfAbes/9er57XvcieCCreoYgsIFAqwCYdEjEJyB6sGw6fS3Hnt3+2DPie3o8Eg6UiWAL/gJi1aSPI700YXwfIMShULDGURUYAgSkmaadbVUSLUkQ4bHAmb+YGnIM1gGs1NKstMhlXHWjohIKBQqOLeeNNKd17x/LSr2UEo3eTj40iiBhwfU/G+Tvtr8Y6j3xZL6dkxB22Uz2lyLlghw9DQPwJc54eS5lTfRgHv6PGZTVNnlITj2a9fOeO367ee9Qzs2JDBowJFgcd+/FOIM8mjvuw84PCQpnVeNVa5ai+4KbUo0K17sAnj4wp0mA9nU/CSJKhlfF5fhL3IV1IvGo6kR0ASOC0z8XY3ZuotmxC3yINoL8sRmJHgjLOUDcaQs6K2TT5UApR0Y9ugxFtMUevQ78nJNAUpEbSzzOTc5sfFptVwmhhWDfipLd/p/rxJeG5AxdkwAAAABJRU5ErkJggg==",de=({variant:e,mess:s,messText:l})=>{var p;return console.log(s),l?h.jsx("div",{className:`alert ${e}`,children:l}):h.jsx("div",{className:`alert ${e}`,children:((p=s==null?void 0:s.data)==null?void 0:p.message)??"500 Internal Server Error"})};de.defaultProps={variant:"alert-info"};const Le=()=>h.jsx("div",{className:"d-flex justify-content-center",children:h.jsx("div",{className:"spinner-border text-success",role:"status",style:{width:"50px",height:"50px"},children:h.jsx("span",{className:"sr-only",children:"Loading..."})})}),Re=()=>{const e=pe(),{width:s}=he(),l=fe(),{register:p,handleSubmit:j,formState:{errors:g},control:A}=Se({defaultValues:{email:"",password:""}}),[k,L]=t.useState(!1),[w,{isLoading:P,error:N}]=ve(),_=async i=>{var u;const d=await w(i),c=(u=d==null?void 0:d.data)==null?void 0:u.metadata;c?c.isAdmin?(localStorage.setItem(be,c.token),localStorage.setItem(ke,c.name),localStorage.setItem(_e,"en"),e(se({isOpen:Date.now(),content:"Login Success",step:1})),l("/")):e(se({isOpen:Date.now(),content:"You are not Admin",step:2})):L(!0)},x=i=>{ye.error(i)},y=i=>{i.preventDefault()};return h.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 4xl:grid-cols-[minmax(0,_1030px)_minmax(0,_1fr)]",children:[s>=1024&&h.jsxs("div",{className:"flex flex-col justify-center items-center lg:p-[60px]",children:[h.jsx(ge,{imgClass:"w-[60px]",textClass:"text-[28px]"}),h.jsx("p",{className:"text-center tracking-[0.2px] font-semibold text-lg leading-6 max-w-[540px] my-7 mx-auto",children:"Gain data-based insights, view progress at a glance, and manage your organization smarter"}),h.jsx("img",{className:"max-w-[780px]",src:Ne,alt:"media"})]}),h.jsx("div",{className:"bg-widget flex items-center justify-center w-full py-10 px-4 lg:p-[60px]",children:h.jsxs(we,{className:"max-w-[460px] w-full",type:"slideUp",duration:400,delay:300,children:[h.jsxs("div",{className:"flex flex-col gap-2.5 text-center",children:[h.jsx("h1",{children:"Welcome back!"}),h.jsxs("p",{className:"lg:max-w-[300px] m-auto 4xl:max-w-[unset] ed1c24 fw600",children:["Đăng nhập bằng USER bên dưới ",h.jsx("br",{}),"( ko change được password )"]})]}),h.jsxs("form",{className:"mt-5",onSubmit:j(_),children:[h.jsxs("div",{className:"flex flex-col gap-5",children:[h.jsxs("div",{className:"field-wrapper",children:[h.jsx("label",{htmlFor:"email",className:"field-label",children:"E-mail [user@example.com]"}),h.jsx("input",{className:Ae("field-input",{"field-input--error":g.email}),id:"email",type:"text",placeholder:"Your E-mail address",...p("email",{required:!0,pattern:/^\S+@\S+$/i}),onChange:i=>{L(!1)}})]}),h.jsx(je,{name:"password",control:A,rules:{required:!0},render:({field:i})=>h.jsx(xe,{id:"password",placeholder:"Your password",error:g.password,innerRef:i.ref,isInvalid:g.password,value:i.value,onChange:i.onChange})})]}),h.jsxs("div",{className:"flex flex-col items-center gap-6 mt-4 mb-10",children:[h.jsx("button",{className:"text-btn",onClick:y,children:"Forgot Password?"}),h.jsx("button",{className:"btn btn--primary w-full",children:"Log In"}),k&&h.jsx(de,{variant:"alert-danger",mess:N}),P&&h.jsx(Le,{})]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-full h-[1px] bg-border"}),h.jsx("span",{className:"flex items-center justify-center relative z-10 w-11 h-[23px] m-auto bg-widget",children:"or"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-4 2xs:grid-cols-2 xs:gap-[30px] mt-[30px] mb-9",children:[h.jsxs(Ee,{className:"btn btn--social",client_id:{}.VITE_GOOGLE_APP_ID,onReject:x,onResolve:_,children:[h.jsx("img",{className:"icon",src:Ie,alt:"Google"}),"Google"]}),h.jsxs(Ce,{className:"btn btn--social",appId:{}.VITE_FB_APP_ID,onReject:x,onResolve:_,children:[h.jsx("img",{className:"icon",src:Pe,alt:"Facebook"}),"Facebook"]})]}),h.jsxs("div",{className:"flex justify-center gap-2.5 leading-none",children:[h.jsx("p",{children:"Don’t have an account?"}),h.jsx("button",{className:"text-btn",children:"Sign Up"})]})]})]})})]})},Fe=()=>h.jsxs(h.Fragment,{children:[h.jsx(me,{title:"Login"}),h.jsx(Re,{})]});export{Fe as default};
