import{j as T}from"./mui-8fd662bb.js";import{D as me}from"./DocumentTitle-15585915.js";import{u as pe,a as fe,b as he,c as ve,L as ge,S as we,A as _e,N as be,d as ke,o as se}from"./index-b16fa0e1.js";import{r as t,e as $,x as ye}from"./antd-d08f3b3b.js";import{u as Ce,C as Se,P as xe}from"./index.esm-bbc2fded.js";function F(){return(F=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(e[m]=l[m])}return e}).apply(this,arguments)}function le(e,i){(i==null||i>e.length)&&(i=e.length);for(var l=0,m=new Array(i);l<i;l++)m[l]=e[l];return m}var ae=window;t.memo(function(e){var i=e.state,l=i===void 0?"":i,m=e.client_id,C=e.className,g=e.redirect_uri,k=e.scope,b=k===void 0?"profile":k,I=e.isOnlyGetToken,w=I!==void 0&&I,L=e.scope_data,P=L===void 0?{profile:{essential:!0}}:L,S=e.response_type,x=S===void 0?"token":S,f=e.children,c=e.onReject,d=e.onResolve,s=e.onLoginStart,p=t.useRef(null),v=t.useState(!1),R=v[0],j=v[1];t.useEffect(function(){!R&&r()},[R]),t.useEffect(function(){return function(){p.current&&p.current.remove()}},[]);var y=t.useCallback(function(){return!!document.getElementById("amazon-login")},[]),u=t.useCallback(function(h,E,H,q,N){E===void 0&&(E="script");var z=h.createElement(E);z.id=H,z.src=q,z.async=!0,z.defer=!0;var O=document.getElementsByTagName("script")[0];p.current=z,O&&O.parentNode&&O.parentNode.insertBefore(z,O),z.onload=N},[]),a=t.useCallback(function(h){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+h.access_token}}).then(function(E){return E.json()}).then(function(E){d({provider:"amazon",data:F({},E,h)})}).catch(function(E){c(E)}).finally(function(){}),Promise.resolve()}catch(E){return Promise.reject(E)}},[c,d]),n=t.useCallback(function(h){w?d({provider:"amazon",data:F({},h)}):a(h)},[a,d,w]),o=t.useCallback(function(h){c(h)},[c]),r=t.useCallback(function(){y()?j(!0):u(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){ae.amazon.Login.setClientId(m),j(!0)})},[y,m,u]),_=t.useCallback(function(){R&&(ae.amazon?(s&&s(),ae.amazon.Login.authorize({scope:b,scope_data:P,response_type:x,redirect_uri:g,state:l},function(h){h.error?o(h.error):n(h)})):(r(),c("Google SDK isn't loaded!")))},[r,b,l,c,P,R,o,s,g,x,n]);return $.createElement("div",{className:C,onClick:_},f)});var ie=window;t.memo(function(e){var i=e.appId,l=e.scope,m=l===void 0?"email,public_profile":l,C=e.state,g=C===void 0||C,k=e.xfbml,b=k===void 0||k,I=e.cookie,w=I===void 0||I,L=e.version,P=L===void 0?"v2.7":L,S=e.language,x=S===void 0?"en_EN":S,f=e.auth_type,c=f===void 0?"":f,d=e.className,s=e.onLoginStart,p=e.onReject,v=e.onResolve,R=e.redirect_uri,j=e.fieldsProfile,y=j===void 0?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":j,u=e.response_type,a=u===void 0?"code":u,n=e.return_scopes,o=n===void 0||n,r=e.isOnlyGetToken,_=r!==void 0&&r,h=e.children,E=t.useRef(null),H=t.useState(!1),q=H[0],N=H[1],z=t.useState(!1),O=z[0],A=z[1];t.useEffect(function(){!q&&X()},[q]),t.useEffect(function(){return function(){E.current&&E.current.remove()}},[]);var B=t.useCallback(function(U,K){var Y=U.createElement("script");Y.id="facebook-jssdk",Y.src="https://connect.facebook.net/en_EN/sdk.js";var G=U.getElementsByTagName("script")[0];G&&G.parentNode&&G.parentNode.insertBefore(Y,G),K()},[]),V=t.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),M=t.useCallback(function(U,K){var Y=window;Y.fbAsyncInit=function(){Y.FB&&Y.FB.init(F({},U)),N(!0);var G=K.getElementById("fb-root");G||((G=K.createElement("div")).id="fb-root",K.body.appendChild(G)),E.current=G}},[]),ee=t.useCallback(function(U){ie.FB.api("/me",{locale:x,fields:y},function(K){v({provider:"facebook",data:F({},U,K)})})},[y,x,v]),te=t.useCallback(function(U){console.log("ðŸš€ ~ file: index.tsx:127 ~ response:",U),U.authResponse?_?v({provider:"facebook",data:F({},U.authResponse)}):ee(U.authResponse):p(U),A(!1)},[ee,_,p,v]),X=t.useCallback(function(){V()?N(!0):B(document,function(){M({appId:i,xfbml:b,version:P,state:g,cookie:w,redirect_uri:R,response_type:a},document)})},[g,i,b,w,P,M,R,a,B,V]),Z=t.useCallback(function(){q&&!O&&(ie.FB?(A(!0),s&&s(),ie.FB.login(te,{scope:m,return_scopes:o,auth_type:c})):(X(),p("Fb isn't loaded!"),A(!1)))},[X,m,p,c,q,s,O,o,te]);return $.createElement("div",{className:d,onClick:Z},h)});var W="875c0462-6309-4ddf-9889-5227b1acc82c",ne=window;t.memo(function(e){var i=e.client_id,l=e.scope,m=l===void 0?"https://www.googleapis.com/auth/userinfo.profile":l,C=e.prompt,g=C===void 0?"select_account":C,k=e.typeResponse,b=k===void 0?"accessToken":k,I=e.ux_mode,w=e.className,L=w===void 0?"":w,P=e.login_hint,S=P===void 0?"":P,x=e.access_type,f=x===void 0?"online":x,c=e.onLoginStart,d=e.onReject,s=e.onResolve,p=e.redirect_uri,v=p===void 0?"/":p,R=e.auto_select,j=R!==void 0&&R,y=e.isOnlyGetToken,u=y!==void 0&&y,a=e.cookie_policy,n=a===void 0?"single_host_origin":a,o=e.hosted_domain,r=o===void 0?"":o,_=e.discoveryDocs,h=_===void 0?"":_,E=e.children,H=e.fetch_basic_profile,q=H===void 0||H,N=t.useRef(null),z=t.useState(!1),O=z[0],A=z[1],B=t.useState(null),V=B[0],M=B[1];t.useEffect(function(){!O&&K()},[O]),t.useEffect(function(){return function(){N.current&&N.current.remove()}},[]);var ee=t.useCallback(function(){return!!document.getElementById("google-login")},[]),te=t.useCallback(function(G,J,D,oe,ue){J===void 0&&(J="script");var Q=G.createElement(J);Q.id=D,Q.src=oe,Q.async=!0,Q.defer=!0;var re=document.getElementsByTagName("script")[0];N.current=Q,re&&re.parentNode&&re.parentNode.insertBefore(Q,re),Q.onload=ue},[]),X=t.useCallback(function(G){if(b==="accessToken"){var J=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":W,Authorization:"Bearer "+G.access_token});fetch("https://cors.bridged.cc/https://www.googleapis.com/oauth2/v3/userinfo?alt=json",{method:"GET",headers:J}).then(function(D){return D.json()}).then(function(D){var oe=F({},G,D);s({provider:"google",data:oe})}).catch(function(D){d(D)})}else fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?id_token="+G.credential,{method:"GET"}).then(function(D){return D.json()}).then(function(D){var oe=F({},G,D);s({provider:"google",data:oe})}).catch(function(D){d(D)})},[b,d,s]),Z=t.useCallback(function(G){G&&f==="offline"||u?s({provider:"google",data:G}):X(G)},[f,u,X,s]),U=t.useCallback(function(G){d({provider:"google",data:G})},[d]),K=t.useCallback(function(){ee()?A(!0):te(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var G={client_id:i,ux_mode:I},J=null;if(b==="idToken")ne.google.accounts.id.initialize(F({},G,{auto_select:j,prompt:"select_account",login_uri:v,callback:Z,native_callback:Z,error_callback:U}));else{var D=F({},G,{scope:m,prompt:g,login_hint:S,access_type:f,hosted_domain:r,redirect_uri:v,cookie_policy:n,discoveryDocs:h,immediate:!0,fetch_basic_profile:q,callback:Z,error_callback:U});J=f==="offline"?ne.google.accounts.oauth2.initCodeClient(D):ne.google.accounts.oauth2.initTokenClient(D)}J&&M(J),A(!0)})},[m,g,I,i,S,j,f,v,b,h,n,r,Z,U,q,te,ee]),Y=t.useCallback(function(){O&&(ne.google?(c&&c(),V?f==="offline"?V.requestCode():V.requestAccessToken():ne.google.accounts.id.prompt()):(K(),d("Google SDK isn't loaded!")))},[f,V,O,K,c,d]);return $.createElement("div",{className:L,onClick:Y},E)});t.memo(function(e){var i=e.state,l=i===void 0?"":i,m=e.scope,C=m===void 0?"repo,gist":m,g=e.client_id,k=e.client_secret,b=e.className,I=b===void 0?"":b,w=e.redirect_uri,L=e.allow_signup,P=L!==void 0&&L,S=e.isOnlyGetToken,x=S!==void 0&&S,f=e.isOnlyGetCode,c=f!==void 0&&f,d=e.children,s=e.onReject,p=e.onResolve,v=e.onLoginStart;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_github")&&o&&(localStorage.setItem("github",o),window.close())},[]);var R=t.useCallback(function(n){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+n.access_token,"x-cors-grida-api-key":W}}).then(function(o){return o.json()}).then(function(o){p({provider:"github",data:F({},o,n)})}).catch(function(o){s(o)})},[s,p]),j=t.useCallback(function(n){if(c)p({provider:"github",data:{code:n}});else{var o={code:n,state:l,redirect_uri:w,client_id:g,client_secret:k},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":W});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(_){return _.text()}).then(function(_){for(var h,E={},H=function(N,z){var O;if(typeof Symbol>"u"||N[Symbol.iterator]==null){if(Array.isArray(N)||(O=function(B,V){if(B){if(typeof B=="string")return le(B,void 0);var M=Object.prototype.toString.call(B).slice(8,-1);return M==="Object"&&B.constructor&&(M=B.constructor.name),M==="Map"||M==="Set"?Array.from(B):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?le(B,void 0):void 0}}(N))){O&&(N=O);var A=0;return function(){return A>=N.length?{done:!0}:{done:!1,value:N[A++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(O=N[Symbol.iterator]()).next.bind(O)}(new URLSearchParams(_));!(h=H()).done;){var q=h.value;E[q[0]]=q[1]}E.access_token?x?p({provider:"github",data:E}):R(E):s("no data")}).catch(function(_){s(_)})}},[l,s,R,p,g,w,k,c,x]),y=t.useCallback(function(n){var o=n.type,r=n.code,_=n.provider;try{return Promise.resolve(o==="code"&&_==="github"&&r&&j(r))}catch(h){return Promise.reject(h)}},[j]),u=t.useCallback(function(){window.removeEventListener("storage",u,!1);var n=localStorage.getItem("github");n&&(y({provider:"github",type:"code",code:n}),localStorage.removeItem("github"))},[y]),a=t.useCallback(function(){v&&v(),window.addEventListener("storage",u,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+g+"&scope="+C+"&state="+l+"_github&redirect_uri="+w+"&allow_signup="+P,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[C,l,g,w,P,v,u]);return $.createElement("div",{className:I,onClick:a},d)});t.memo(function(e){var i=e.state,l=i===void 0?"":i,m=e.client_id,C=e.client_secret,g=e.className,k=e.redirect_uri,b=e.fields,I=b===void 0?"id,username,account_type,media_count":b,w=e.scope,L=w===void 0?"user_profile,user_media":w,P=e.response_type,S=P===void 0?"code":P,x=e.isOnlyGetCode,f=x!==void 0&&x,c=e.isOnlyGetToken,d=c!==void 0&&c,s=e.children,p=e.onReject,v=e.onResolve,R=e.onLoginStart;t.useEffect(function(){var o=new URL(window.location.href),r=o.searchParams.get("code"),_=o.searchParams.get("state");_!=null&&_.includes("_instagram")&&r&&(localStorage.setItem("instagram",r),window.close())},[]);var j=t.useCallback(function(o){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields="+I+"&access_token="+o.access_token,{method:"GET",headers:{"x-cors-grida-api-key":W}}).then(function(r){return r.json()}).then(function(r){v({provider:"instagram",data:F({},r,o)})}).catch(function(r){p(r)})},[I,p,v]),y=t.useCallback(function(o){if(f)v({provider:"instagram",data:{code:o}});else{var r={grant_type:"authorization_code",code:o,redirect_uri:k,client_id:m,client_secret:C},_=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":W});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:_,body:new URLSearchParams(r)}).then(function(h){return h.json()}).then(function(h){h.access_token?d?v({provider:"instagram",data:h}):j(h):p("no data")}).catch(function(h){p(h)}).finally(function(){})}},[p,v,j,m,k,C,f,d]),u=t.useCallback(function(o){var r=o.type,_=o.code,h=o.provider;try{return Promise.resolve(r==="code"&&h==="instagram"&&_&&y(_))}catch(E){return Promise.reject(E)}},[y]),a=t.useCallback(function(){window.removeEventListener("storage",a,!1);var o=localStorage.getItem("instagram");o&&(u({provider:"instagram",type:"code",code:o}),localStorage.removeItem("instagram"))},[u]),n=t.useCallback(function(){R&&R(),window.addEventListener("storage",a,!1);var o=window.screen.width/2-225,r=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+S+"&client_id="+m+"&scope="+L+"&state="+l+"_instagram&redirect_uri="+k,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+r+", left="+o)},[L,l,m,k,R,S,a]);return $.createElement("div",{className:g,onClick:n},s)});t.memo(function(e){var i=e.tenant,l=i===void 0?"common":i,m=e.state,C=m===void 0?"":m,g=e.client_id,k=e.className,b=e.redirect_uri,I=e.scope,w=I===void 0?"profile openid email":I,L=e.response_type,P=L===void 0?"code":L,S=e.response_mode,x=S===void 0?"query":S,f=e.children,c=e.code_challenge,d=c===void 0?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":c,s=e.code_challenge_method,p=s===void 0?"plain":s,v=e.prompt,R=v===void 0?"select_account":v,j=e.isOnlyGetCode,y=j!==void 0&&j,u=e.isOnlyGetToken,a=u!==void 0&&u,n=e.onLoginStart,o=e.onReject,r=e.onResolve;t.useEffect(function(){var N=new URL(window.location.href),z=N.searchParams.get("code"),O=N.searchParams.get("state");O!=null&&O.includes("_microsoft")&&z&&(localStorage.setItem("microsoft",z),window.close())},[]);var _=t.useCallback(function(N){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+N.access_token}}).then(function(z){return z.json()}).then(function(z){r({provider:"microsoft",data:F({},z,N)})}).catch(function(z){o(z)})},[o,r]),h=t.useCallback(function(N){if(y)r({provider:"microsoft",data:{code:N}});else{var z={code:N,scope:w,client_id:g,redirect_uri:b,code_verifier:d,grant_type:"authorization_code"},O=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+l+"/oauth2/v2.0/token",{method:"POST",headers:O,body:new URLSearchParams(z)}).then(function(A){return A.json()}).then(function(A){A.access_token?a?r({provider:"microsoft",data:A}):_(A):o("no data")}).catch(function(A){o(A)})}},[w,l,o,_,g,r,b,d,y,a]),E=t.useCallback(function(N){var z=N.type,O=N.code,A=N.provider;try{return Promise.resolve(z==="code"&&A==="microsoft"&&O&&h(O))}catch(B){return Promise.reject(B)}},[h]),H=t.useCallback(function(){window.removeEventListener("storage",H,!1);var N=localStorage.getItem("microsoft");N&&(E({provider:"microsoft",type:"code",code:N}),localStorage.removeItem("microsoft"))},[E]),q=t.useCallback(function(){n&&n(),window.addEventListener("storage",H,!1);var N=window.screen.width/2-225,z=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+l+"/oauth2/v2.0/authorize?client_id="+g+`
        &response_type=`+P+`
        &redirect_uri=`+b+`
        &response_mode=`+x+`
        &scope=`+w+`
        &state=`+C+`_microsoft
        &prompt=`+R+`
        &code_challenge=`+d+`
        &code_challenge_method=`+p,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+z+", left="+N)},[w,C,R,l,g,n,b,x,P,d,H,p]);return $.createElement("div",{className:k,onClick:q},f)});t.memo(function(e){var i=e.state,l=i===void 0?"":i,m=e.scope,C=m===void 0?"r_liteprofile":m,g=e.client_id,k=e.client_secret,b=e.className,I=b===void 0?"":b,w=e.redirect_uri,L=e.response_type,P=L===void 0?"code":L,S=e.isOnlyGetCode,x=S!==void 0&&S,f=e.isOnlyGetToken,c=f!==void 0&&f,d=e.children,s=e.onLoginStart,p=e.onReject,v=e.onResolve;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_linkedin")&&o&&(localStorage.setItem("linkedin",o),window.close())},[]);var R=t.useCallback(function(n){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+n.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(o){return o.json()}).then(function(o){var r=F({},n);if(o.contents){var _=JSON.parse(o.contents);typeof n=="object"&&Object.entries(_).map(function(h){r[h[0]]=h[1]})}v({provider:"linkedin",data:r})}).catch(function(o){p(o)})},[p,v]),j=t.useCallback(function(n){if(x)v({provider:"linkedin",data:{code:n}});else{var o={code:n,grant_type:"authorization_code",redirect_uri:w,client_id:g,client_secret:k},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":W});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(_){return _.json()}).then(function(_){c?v({provider:"linkedin",data:_}):R(_)}).catch(function(_){p(_)})}},[p,v,g,R,w,k,x,c]),y=t.useCallback(function(n){var o=n.type,r=n.code,_=n.provider;try{return Promise.resolve(o==="code"&&_==="linkedin"&&r&&j(r))}catch(h){return Promise.reject(h)}},[j]),u=t.useCallback(function(){window.removeEventListener("storage",u,!1);var n=localStorage.getItem("linkedin");n&&(y({provider:"linkedin",type:"code",code:n}),localStorage.removeItem("linkedin"))},[y]),a=t.useCallback(function(){s&&s(),window.addEventListener("storage",u,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+P+"&client_id="+g+"&scope="+C+"&state="+l+"_linkedin&redirect_uri="+w,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[s,u,P,g,C,l,w]);return $.createElement("div",{className:I,onClick:a},d)});t.memo(function(e){var i=e.state,l=i===void 0?"":i,m=e.scope,C=m===void 0?"boards:read,pins:read,user_accounts:read":m,g=e.client_id,k=e.client_secret,b=e.className,I=b===void 0?"":b,w=e.redirect_uri,L=e.isOnlyGetCode,P=L!==void 0&&L,S=e.isOnlyGetToken,x=S!==void 0&&S,f=e.children,c=e.onLoginStart,d=e.onReject,s=e.onResolve;t.useEffect(function(){var u=new URL(window.location.href),a=u.searchParams.get("code"),n=u.searchParams.get("state");n!=null&&n.includes("_pinterest")&&a&&(localStorage.setItem("pinterest",a),window.close())},[]);var p=t.useCallback(function(u){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+u.access_token,"x-cors-grida-api-key":W}}).then(function(a){return a.json()}).then(function(a){s({provider:"pinterest",data:F({},u,a)})}).catch(function(a){return d(a)})},[d,s]),v=t.useCallback(function(u){try{var a=function(){if(!P){var n={code:u,redirect_uri:w,grant_type:"authorization_code"},o=[];for(var r in n){var _=encodeURIComponent(r),h=encodeURIComponent(n[r]);o.push(_+"="+h)}return o=o.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(g+":"+k),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":W},body:o}).then(function(E){return E.json()}).catch(function(E){return d(E)})).then(function(E){E.access_token&&(x?s({provider:"pinterest",data:E}):p(E))})}s({provider:"pinterest",data:{code:u}})}();return Promise.resolve(a&&a.then?a.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},[d,g,p,s,w,k,P,x]),R=t.useCallback(function(u){var a=u.type,n=u.code,o=u.provider;try{return Promise.resolve(a==="code"&&o==="pinterest"&&n&&v(n))}catch(r){return Promise.reject(r)}},[v]),j=t.useCallback(function(){window.removeEventListener("storage",j,!1);var u=localStorage.getItem("pinterest");u&&(R({provider:"pinterest",type:"code",code:u}),localStorage.removeItem("pinterest"))},[R]),y=t.useCallback(function(){c&&c(),window.addEventListener("storage",j,!1);var u=window.screen.width/2-225,a=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+g+"&scope="+C+"&state="+l+"_pinterest&redirect_uri="+w+"&response_type=code","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+a+", left="+u)},[C,l,g,w,c,j]);return $.createElement("div",{className:I,onClick:y},f)});t.memo(function(e){var i=e.client_id,l=e.className,m=l===void 0?"":l,C=e.redirect_uri,g=e.children,k=e.fields,b=k===void 0?"created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld":k,I=e.state,w=I===void 0?"state":I,L=e.scope,P=L===void 0?"users.read%20tweet.read":L,S=e.isOnlyGetCode,x=S!==void 0&&S,f=e.isOnlyGetToken,c=f!==void 0&&f,d=e.onLoginStart,s=e.onReject,p=e.onResolve;t.useEffect(function(){var a=new URL(window.location.href),n=a.searchParams.get("code");a.searchParams.get("state")&&n&&(localStorage.setItem("twitter",""+n),window.close())},[]);var v=t.useCallback(function(a){fetch("https://cors.bridged.cc/https://api.twitter.com/2/users/me?user.fields="+b,{method:"GET",headers:{Authorization:"Bearer "+a.access_token,"x-cors-grida-api-key":W}}).then(function(n){return n.json()}).then(function(n){p({provider:"twitter",data:F({},a,n.data)})}).catch(function(n){return s(n)})},[b,s,p]),R=t.useCallback(function(a){try{var n=function(){if(!x){var o=new URLSearchParams({code:a,redirect_uri:C,client_id:i,grant_type:"authorization_code",code_verifier:"challenge"});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/2/oauth2/token",{method:"POST",body:o,headers:{"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":W}}).then(function(r){return r.json()}).catch(function(r){return s(r)})).then(function(r){r.access_token&&(c?p({provider:"twitter",data:r}):v(r))})}p({provider:"twitter",data:{code:a}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},[s,v,p,i,C,x,c]),j=t.useCallback(function(a){var n=a.type,o=a.code,r=a.provider;try{return Promise.resolve(n==="code"&&r==="twitter"&&o&&R(o))}catch(_){return Promise.reject(_)}},[R]),y=t.useCallback(function(){window.removeEventListener("storage",y,!1);var a=localStorage.getItem("twitter");a&&(j({provider:"twitter",type:"code",code:a}),localStorage.removeItem("twitter"))},[j]),u=t.useCallback(function(){try{d&&d(),window.addEventListener("storage",y,!1);var a=window.screen.width/2-225,n=window.screen.height/2-365;return window.open("https://twitter.com/i/oauth2/authorize?response_type=code&client_id="+i+"&redirect_uri="+C+"&scope="+P+"&state="+w+"&code_challenge=challenge&code_challenge_method=plain","twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+a),Promise.resolve()}catch(o){return Promise.reject(o)}},[P,w,i,d,C,y]);return $.createElement("div",{className:m,onClick:u},g)});typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var ce=window;t.memo(function(e){var i=e.client_id,l=e.scope,m=l===void 0?"name email":l,C=e.className,g=C===void 0?"":C,k=e.onLoginStart,b=e.onReject,I=e.onResolve,w=e.redirect_uri,L=w===void 0?"/":w,P=e.children,S=t.useRef(null),x=t.useState(!1),f=x[0],c=x[1];t.useEffect(function(){!f&&v()},[f]),t.useEffect(function(){return function(){S.current&&S.current.remove()}},[]);var d=t.useCallback(function(){return!!document.getElementById("apple-login")},[]),s=t.useCallback(function(j,y,u,a,n){y===void 0&&(y="script");var o=j.createElement(y);o.id=u,o.src=a,o.async=!0,o.defer=!0;var r=document.getElementsByTagName("script")[0];S.current=o,r&&r.parentNode&&r.parentNode.insertBefore(o,r),o.onload=n},[]),p=t.useCallback(function(j){I({provider:"apple",data:j})},[I]),v=t.useCallback(function(){d()?c(!0):s(document,"script","apple-login","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",function(){ce.AppleID.auth.init({clientId:i,scope:m,redirectURI:L,state:"origin:web",usePopup:!0}),c(!0)})},[m,i,L,s,d]),R=t.useCallback(function(){try{if(!f)return Promise.resolve();var j=function(){if(ce.AppleID){k&&k();var y=function(u,a){try{var n=Promise.resolve(ce.AppleID.auth.signIn()).then(function(o){p(o)})}catch(o){return a(o)}return n&&n.then?n.then(void 0,a):n}(0,function(u){b({err:u})});if(y&&y.then)return y.then(function(){})}else v(),b("Apple SDK isn't loaded!")}();return Promise.resolve(j&&j.then?j.then(function(){}):void 0)}catch(y){return Promise.reject(y)}},[p,f,v,k,b]);return $.createElement("div",{className:g,onClick:R},P)});t.memo(function(e){var i=e.state,l=i===void 0?"":i,m=e.scope,C=m===void 0?"user.info.basic":m,g=e.client_key,k=e.className,b=k===void 0?"":k,I=e.redirect_uri,w=e.children,L=e.onResolve,P=e.onLoginStart;t.useEffect(function(){var c=new URL(window.location.href),d=c.searchParams.get("code"),s=c.searchParams.get("state");s!=null&&s.includes("_tiktok")&&d&&(localStorage.setItem("tiktok",d),window.close())},[]);var S=t.useCallback(function(c){var d=c.type,s=c.code,p=c.provider;try{return Promise.resolve(d==="code"&&p==="tiktok"&&s&&L({provider:"tiktok",data:{code:s}}))}catch(v){return Promise.reject(v)}},[L]),x=t.useCallback(function(){window.removeEventListener("storage",x,!1);var c=localStorage.getItem("tiktok");c&&(S({provider:"tiktok",type:"code",code:c}),localStorage.removeItem("instagram"))},[S]),f=t.useCallback(function(){P&&P(),window.addEventListener("storage",x,!1);var c=window.screen.width/2-225,d=window.screen.height/2-365;window.open("https://www.tiktok.com/auth/authorize?client_key="+g+"&scope="+C+"&state="+l+"_tiktok&redirect_uri="+I+"&response_type=code","Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+d+", left="+c)},[C,l,g,I,P,x]);return $.createElement("div",{className:b,onClick:f},w)});const je="/assets/login-33fdac8a.webp",de=({variant:e,mess:i,messText:l})=>{var m;return console.log(i),l?T.jsx("div",{className:`alert ${e}`,children:l}):T.jsx("div",{className:`alert ${e}`,children:((m=i==null?void 0:i.data)==null?void 0:m.message)??"500 Internal Server Error"})};de.defaultProps={variant:"alert-info"};const Ee=()=>T.jsx("div",{className:"d-flex justify-content-center",children:T.jsx("div",{className:"spinner-border text-success",role:"status",style:{width:"50px",height:"50px"},children:T.jsx("span",{className:"sr-only",children:"Loading..."})})}),Pe=()=>{const e=pe(),{width:i}=fe(),l=he(),{register:m,handleSubmit:C,formState:{errors:g},control:k}=Ce({defaultValues:{email:"",password:""}}),[b,I]=t.useState(!1),[w,{isLoading:L,error:P}]=ve(),S=async f=>{var s;const c=await w(f),d=(s=c==null?void 0:c.data)==null?void 0:s.metadata;d?d.isAdmin?(localStorage.setItem(_e,d.token),localStorage.setItem(be,d.name),localStorage.setItem(ke,"en"),e(se({isOpen:Date.now(),content:"Login Success",step:1})),l("/")):e(se({isOpen:Date.now(),content:"You are not Admin",step:2})):I(!0)},x=f=>{f.preventDefault()};return T.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 4xl:grid-cols-[minmax(0,_1030px)_minmax(0,_1fr)]",children:[i>=1024&&T.jsxs("div",{className:"flex flex-col justify-center items-center lg:p-[60px]",children:[T.jsx(ge,{imgClass:"w-[60px]",textClass:"text-[28px]"}),T.jsx("p",{className:"text-center tracking-[0.2px] font-semibold text-lg leading-6 max-w-[540px] my-7 mx-auto",children:"Gain data-based insights, view progress at a glance, and manage your organization smarter"}),T.jsx("img",{className:"max-w-[780px]",src:je,alt:"media"})]}),T.jsx("div",{className:"bg-widget flex items-center justify-center w-full py-10 px-4 lg:p-[60px]",children:T.jsxs(we,{className:"max-w-[460px] w-full",type:"slideUp",duration:400,delay:300,children:[T.jsx("div",{className:"flex flex-col gap-2.5 text-center",children:T.jsx("h1",{children:"Welcome back!"})}),T.jsxs("form",{className:"mt-5",onSubmit:C(S),children:[T.jsxs("div",{className:"flex flex-col gap-5",children:[T.jsxs("div",{className:"field-wrapper",children:[T.jsx("label",{htmlFor:"email",className:"field-label",children:"E-mail"}),T.jsx("input",{className:ye("field-input",{"field-input--error":g.email}),id:"email",type:"text",placeholder:"Your E-mail address",...m("email",{required:!0,pattern:/^\S+@\S+$/i}),onChange:f=>{I(!1)}})]}),T.jsx(Se,{name:"password",control:k,rules:{required:!0},render:({field:f})=>T.jsx(xe,{id:"password",placeholder:"Your password",error:g.password,innerRef:f.ref,isInvalid:g.password,value:f.value,onChange:f.onChange})})]}),T.jsxs("div",{className:"flex flex-col items-center gap-6 mt-4 mb-10",children:[T.jsx("button",{className:"text-btn",onClick:x,children:"Forgot Password?"}),T.jsx("button",{className:"btn btn--primary w-full",children:"Log In"}),b&&T.jsx(de,{variant:"alert-danger",mess:P}),L&&T.jsx(Ee,{})]})]})]})})]})},ze=()=>T.jsxs(T.Fragment,{children:[T.jsx(me,{title:"Login"}),T.jsx(Pe,{})]});export{ze as default};
