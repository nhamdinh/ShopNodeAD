import{j as t}from"./mui-8fd662bb.js";import{u as L,b as M,q as j,j as R,k as U,G as b}from"./index-b16fa0e1.js";/* empty css              */import{r as u,K as g,L as c,T as N}from"./antd-d08f3b3b.js";import{f as _}from"./commonFunction-be178139.js";function K(){L(),M();const[F,S]=u.useState([]),[q,w]=u.useState([]),[I,O]=u.useState(0),[D,B]=u.useState([]),[T,k]=u.useState(0),[G,E]=u.useState(!1),[H,y]=u.useState(0),[$,f]=u.useState(0),{data:h,error:Q,isSuccess:A,isLoading:Y}=j({isBan:!0},{refetchOnMountOrArgChange:!0,skip:!1}),{data:x,error:z,isSuccess:P,isLoading:J}=j({isBan:!1},{refetchOnMountOrArgChange:!0,skip:!1});u.useEffect(()=>{var n;if(A){const d=(n=h==null?void 0:h.metadata)==null?void 0:n.thuDungGios,i=[];d.map(s=>{s==null||s.orderItems.map(e=>{i.push({...e})})});const o=i.reduce((s,e)=>{const l=s.find(a=>a.label===e.label);return l?l.quantity=+l.quantity+ +e.quantity:s.push({...e}),s},[]).sort((s,e)=>s.label>e.label?1:s.label<e.label?-1:0),m=o.reduce((s,e)=>(s.push(e.label),s),[]);_(Object.keys(b),m).map((s,e)=>{o.push({id:Date.now()+e,label:s,price:R[s],quantity:0})}),k(o.reduce((s,e)=>+s+ +e.quantity,[0])),B(o.sort((s,e)=>s.label>e.label?1:s.label<e.label?-1:0));let p=0;y(d.reduce((s,e)=>{if(e!=null&&e.isPaid){const l=e==null?void 0:e.orderItems.reduce((a,r)=>(a=+a+ +r.price*+r.quantity,a),[0]);return s=+s+ +l}else return p=+(e==null?void 0:e.orderItems.reduce((a,r)=>(a=+a+ +r.price*+r.quantity,a),[0]))+ +p,s},[0])),f(p),S(d)}},[h]),u.useEffect(()=>{var n;if(P){const d=(n=x==null?void 0:x.metadata)==null?void 0:n.thuDungGios,i=[];d.map(s=>{s==null||s.orderItems.map(e=>{i.push({...e})})});const o=i.reduce((s,e)=>{const l=s.find(a=>a.label===e.label);return l?l.quantity=+l.quantity+ +e.quantity:s.push({...e}),s},[]).sort((s,e)=>s.label>e.label?1:s.label<e.label?-1:0),m=o.reduce((s,e)=>(s.push(e.label),s),[]);_(Object.keys(b),m).map((s,e)=>{o.push({id:Date.now()+e,label:s,price:U[s],quantity:0})}),O(o.reduce((s,e)=>+s+ +e.quantity,[0])),w(o.sort((s,e)=>s.label>e.label?1:s.label<e.label?-1:0));let p=0;y(d.reduce((s,e)=>{if(e!=null&&e.isPaid){const l=e==null?void 0:e.orderItems.reduce((a,r)=>(a=+a+ +r.price*+r.quantity,a),[0]);return s=+s+ +l}else return p=+(e==null?void 0:e.orderItems.reduce((a,r)=>(a=+a+ +r.price*+r.quantity,a),[0]))+ +p,s},[0])),f(p),S(d)}},[x]);const C=[{title:"sl BÁN",dataIndex:"quantity",align:"center"}],v=[{title:"No.",dataIndex:"id",key:"id",ellipsis:!0,align:"center",render:(n,d,i)=>t.jsx(t.Fragment,{children:i+1})},{title:"label",dataIndex:"label",ellipsis:!0,align:"center",render:n=>t.jsx(t.Fragment,{children:b[n]})},{title:"sl NHẬP",dataIndex:"quantity",align:"center"}];return t.jsxs("section",{className:"content-main",children:[t.jsx("div",{className:"content-header ",children:t.jsxs("h2",{className:"content-title df",onClick:()=>{},children:[t.jsx("div",{children:"TỔNG"}),t.jsxs("button",{type:"submit",onClick:()=>{E(!G)},className:"btn btn-primary",children:["show"," "]})]})}),t.jsx("div",{className:"card mb-4 shadow-sm",children:t.jsxs("div",{className:"card-body",children:[t.jsxs(g,{gutter:16,className:"mt20px",children:[t.jsxs(c,{className:"gutter-row",span:18,children:[t.jsx("h3",{children:"NHẬP"}),t.jsx(N,{className:"AdminManagement__table",columns:v,dataSource:q,rowKey:n=>`${n==null?void 0:n.id}`,pagination:!1})]}),t.jsxs(c,{className:"gutter-row ",span:6,children:[t.jsx("h3",{children:"BÁN"}),t.jsx(N,{className:"AdminManagement__table",columns:C,dataSource:D,rowKey:n=>`${n==null?void 0:n.id}`,pagination:!1})]})]}),t.jsxs(g,{gutter:16,className:"mt20px",children:[t.jsx(c,{className:"gutter-row",span:12}),t.jsx(c,{className:"gutter-row ",span:6,children:t.jsx("h4",{className:"df content__center",children:I})}),t.jsx(c,{className:"gutter-row ",span:6})]}),t.jsxs(g,{gutter:16,className:"mt20px",children:[t.jsx(c,{className:"gutter-row",span:12}),t.jsx(c,{className:"gutter-row ",span:6}),t.jsx(c,{className:"gutter-row ",span:6,children:t.jsx("h4",{className:"df content__center",children:T})})]})]})})]})}function se(){return t.jsx(K,{})}export{se as default};
