import{j as e}from"./mui-2493782d.js";import{P as Z}from"./PageHeader-8dc226f4.js";import{b as $,u as k,Z as G,S as F,$ as B,a0 as J,e as K,a1 as Q,a2 as X,a3 as W,v as I,g as b,o as U,j as ee,n as se}from"./index-f5793006.js";import{r as o,U as ae,l as le,m as O}from"./antd-1d728b6a.js";import{P as ie}from"./PasswordInput-64148cfa.js";import{S as _}from"./index-8d8d8ff4.js";import{u as te,C as R}from"./index.esm-f6aeb949.js";import{c as ne}from"./country-list-abf4fa3b.js";import{C as ce}from"./city-list-9516745b.js";import{b as T}from"./commonFunction-f8b3aaf0.js";import"./DocumentTitle-62345d26.js";const re=5,V=re*1e3*1e3,oe=({userInfo:s,cb_setImage:m})=>{const r=$(),j=k(),[f,n]=o.useState([]),[g,v]=o.useState(""),D=({fileList:i})=>{n(i)},d=async i=>{let p=i.url;p||(p=await new Promise(C=>{const x=new FileReader;x.readAsDataURL(i.originFileObj),x.onload=()=>C(x.result)}));const u=new Image;u.src=p;const t=window.open(p);t==null||t.document.write(u.outerHTML)},[N,{isLoading:q}]=G(),L=async i=>{var P;const{onSuccess:p,onError:u,file:t,onProgress:C}=i;if((t?Number(t==null?void 0:t.size):V+1)<=V){let S=new FormData;const A=Date.now()+t.name;S.append("name",A),S.append("file",t);try{const h=await N({formData:S,folder:B}),M=(P=h==null?void 0:h.data)==null?void 0:P.metadata;M&&z(M)}catch(h){console.log(h)}}},z=i=>{console.log(i==null?void 0:i.thumb_url),n([{url:i==null?void 0:i.url}]),v(i==null?void 0:i.thumb_url)};o.useEffect(()=>{n([{url:s==null?void 0:s.avatar}]),v(s==null?void 0:s.avatar)},[s]),o.useEffect(()=>{m&&m(g)},[g]);const y=async()=>{j(J()),r("/")};return e.jsxs(F,{className:"card flex flex-col items-center justify-center",id:"userProfileCard",children:[e.jsxs("div",{className:"relative mb-3.5",children:[e.jsx(ae,{fileList:f,listType:"picture-card",accept:".png,.jpeg,.gif,.jpg",onChange:D,onPreview:d,customRequest:L,children:f.length<1&&"Choose file"}),e.jsx("button",{className:`absolute z-10 right-0 bottom-0 h-10 w-10 bg-green text-widget rounded-full border-[3px]
                        border-widget border-solid transition hover:bg-green-darker`,"aria-label":"Change profile picture",children:e.jsx("i",{className:"inline-block icon-camera-solid mt-1"})})]}),e.jsx("h4",{children:s.name}),e.jsx("span",{className:"badge badge--square bg-red min-w-[96px] mt-2.5",children:"Admin"}),e.jsxs("p",{className:"subheading-2 mt-6 mb-[18px]",children:["last visit ",le().format("DD/MM/YYYY")]}),e.jsx("button",{onClick:y,className:"btn btn--secondary w-full md:max-w-[280px]",children:"Log Out"})]})},de=({userInfo:s,avatar:m})=>{const r=k(),{theme:j,toggleTheme:f}=K(),{register:n,watch:g,setValue:v,handleSubmit:D,formState:{errors:d},control:N}=te({defaultValues:{name:s==null?void 0:s.name,passwordOld:"",email:s==null?void 0:s.email,phone:s==null?void 0:s.phone,password:"",country:null,city:null,state:"",zip:"",address:""}}),[q,L]=o.useState(),[z,y]=o.useState(),[i,p]=o.useState([]),u=()=>{let l=ne().getData();for(let a=0;a<l.length;a++)l[a].value==="RU"&&(l[a].label="Russia [terrorist state]");return l},t=l=>{L(l),y(null);let a=[];ce.getCitiesOfCountry(l.value).map(w=>a.push({value:w.name,label:w.name})),p(a)},C=l=>{console.log(l);const{name:a,phone:c}=l;Y({name:a,phone:c,avatar:m})},[x,{isLoading:P,error:S}]=Q(),[A,{isLoading:h,error:M}]=X(),Y=async l=>{await x(l).then(a=>{const c=a==null?void 0:a.data;r(c?U({isOpen:Date.now(),content:"Updated Profile Success",step:1}):U({isOpen:Date.now(),content:"Update Profile Failed",step:2}))}).catch(a=>{console.log(a)})},H=async l=>{await A(l).then(a=>{var w,E;const c=a==null?void 0:a.data;r(c?U({isOpen:Date.now(),content:"Updated Password Success",step:1}):U({isOpen:Date.now(),content:((E=(w=a==null?void 0:a.error)==null?void 0:w.data)==null?void 0:E.message)??"Update Password Failed !",step:2}))}).catch(a=>{console.log(a)})};return e.jsxs(F,{className:`card flex flex-col gap-[30px] md:gap-12 md:row-start-2 md:col-span-2 md:!pb-[50px]
                xl:row-start-1 xl:col-start-2 xl:col-span-1`,children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("h5",{children:"My Profile Details"}),e.jsxs("form",{onSubmit:D(C),children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 md:gap-5",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label",htmlFor:"name",children:"User Name"}),e.jsx("input",{className:O("field-input",{"field-input--error":d.name}),type:"text",id:"name",placeholder:"First Name",defaultValue:s==null?void 0:s.name,...n("name",{required:!0})})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label",htmlFor:"email",children:"Email"}),e.jsx("input",{className:O("field-input",{"field-input--error":d.email}),type:"text",id:"email",placeholder:"Email",readOnly:!0,disabled:!0,defaultValue:s==null?void 0:s.email,...n("email",{required:!1,pattern:/^\S+@\S+$/i})})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label",htmlFor:"phone",children:"Phone Number"}),e.jsx("input",{className:O("field-input",{"field-input--error":d.phone}),type:"text",id:"phone",maxLength:10,placeholder:"(123) 456-7890",defaultValue:s==null?void 0:s.phone,...n("phone",{required:!0,pattern:W})})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsxs("label",{className:"field-label",htmlFor:"passwordOld",children:["Old Password"," "]}),e.jsx("input",{className:O("field-input",{"field-input--error":d.passwordOld}),type:"text",id:"passwordOld",placeholder:"Old Password ",defaultValue:"",...n("passwordOld",{required:!1})})]}),e.jsx(R,{name:"password",control:N,rules:{required:!0},render:({field:{onChange:l,value:a,ref:c}})=>e.jsx(ie,{id:"profilePassword",innerRef:c,value:a,isInvalid:d.password,onChange:l})})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label",htmlFor:"country",children:"Country"}),e.jsx(R,{name:"country",control:N,render:({field:l})=>e.jsx(_,{options:u(),value:l.value,onChange:a=>{l.onChange(a),t(a),v("city",null)},placeholder:"Country",isSearchable:!0,innerRef:l.ref})})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label",htmlFor:"city",children:"City"}),e.jsx(R,{name:"city",control:N,render:({field:l})=>e.jsx(_,{options:i,value:l.value,onChange:a=>{l.onChange(a),y(a)},placeholder:"City",isSearchable:!0,innerRef:l.ref})})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label",htmlFor:"state",children:"State"}),e.jsx("input",{className:"field-input",type:"text",id:"state",placeholder:"State",...n("state")})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label",htmlFor:"zip",children:"Zip Code"}),e.jsx("input",{className:"field-input",type:"text",id:"zip",placeholder:"Zip Code",...n("zip",{pattern:/^\d{5}(?:[-\s]\d{4})?$/i})})]}),e.jsxs("div",{className:"field-wrapper",children:[e.jsx("label",{className:"field-label",htmlFor:"address",children:"Address"}),e.jsx("input",{className:"field-input",type:"text",id:"address",placeholder:"Address",...n("address")})]})]})]}),e.jsxs("div",{className:"mt-2.5",children:[e.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation();const a=g("passwordOld"),c=g("password");H({password:c,passwordOld:a})},className:"text-btn",type:"button",children:"Change password"}),e.jsxs("button",{className:"btn btn--primary w-full mt-5 md:w-fit md:px-[70px]",type:"submit",children:[P&&e.jsx(I,{radius:30})," Update information"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{children:"Admin Panel Tools"}),e.jsxs("div",{className:"grid gap-4 mt-5 md:grid-cols-2 md:gap-y-8 md:gap-x-[50px] md:mt-8 lg:grid-cols-3 lg:max-w-[780px]",children:[e.jsxs(b,{className:"tool-btn",to:"/connected-apps",children:[e.jsx("span",{className:"icon-wrapper",children:e.jsx("i",{className:"icon icon-window-solid"})}),e.jsxs("span",{children:["Connected Apps ",e.jsx("span",{className:"subheading-2",children:"(12)"})]})]}),e.jsxs(b,{className:"tool-btn",to:"/connected-apps",children:[e.jsx("span",{className:"icon-wrapper",children:e.jsx("i",{className:"icon icon-money-check-dollar-pen-solid",style:{fontSize:16}})}),"Payment Methods"]}),e.jsxs(b,{className:"tool-btn",to:"/connected-apps",children:[e.jsx("span",{className:"icon-wrapper",children:e.jsx("i",{className:"icon icon-screwdriver-wrench-solid"})}),"Appearance"]}),e.jsxs(b,{className:"tool-btn",to:"/connected-apps",children:[e.jsx("span",{className:"icon-wrapper",children:e.jsx("i",{className:"icon icon-shield-halved-solid"})}),"Security Assets"]}),e.jsxs(b,{className:"tool-btn",to:"/connected-apps",children:[e.jsx("span",{className:"icon-wrapper",children:e.jsx("i",{className:"icon icon-sliders-solid"})}),"Configuration Settings"]}),e.jsxs("button",{className:"tool-btn","aria-label":"Change theme",onClick:f,children:[e.jsx("span",{className:"icon-wrapper",children:e.jsx("i",{className:`icon icon-${j==="light"?"sun-bright":"moon"}-solid`})}),"View Mode"]})]})]})]})},pe=()=>e.jsxs(F,{className:"card flex flex-col justify-center gap-5",id:"userProfilePanel",children:[e.jsxs("button",{className:"flex items-center gap-4 w-fit",children:[e.jsx("span",{className:"icon-wrapper text-red",children:e.jsx("i",{className:"icon-bell-solid"})}),e.jsxs("span",{children:["Notifications ",e.jsx("span",{className:"subheading-2",children:"(2)"})]})]}),e.jsxs("button",{className:"flex items-center gap-4 w-fit",children:[e.jsx("span",{className:"icon-wrapper text-green",children:e.jsx("i",{className:"icon-message-solid"})}),e.jsxs("span",{children:["Messages ",e.jsx("span",{className:"subheading-2",children:"(7)"})]})]})]}),me=({userInfo:s})=>e.jsx(F,{className:"card flex items-center",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"icon-wrapper mt-1",children:e.jsx("i",{className:"icon icon-envelope-solid"})}),s==null?void 0:s.email]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"icon-wrapper mt-1.5",children:e.jsx("i",{className:"icon icon-location-dot-solid"})}),e.jsx("span",{className:"max-w-[156px] ed1c24 shadow__orangered capitalize",children:s==null?void 0:s.productShopName})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"icon-wrapper mt-1",children:e.jsx("i",{className:"icon icon-mobile-solid"})}),T(s==null?void 0:s.phone)]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"icon-wrapper mt-1",children:e.jsx("i",{className:"icon icon-whatsapp"})}),T(s==null?void 0:s.phone)]}),e.jsxs("button",{className:"flex items-center gap-4 w-fit",children:[e.jsx("span",{className:"icon-wrapper mt-1",children:e.jsx("i",{className:"icon icon-file-arrow-down-solid"})}),"Profile Information file"]})]})}),Ce=()=>{const s=ee(se),[m,r]=o.useState("");return e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:"Settings"}),e.jsxs("div",{className:"widgets-grid md:!grid-cols-2 xl:!grid-cols-[340px,_minmax(0,1fr)]",children:[e.jsxs("div",{className:"widgets-grid md:!grid-cols-2 md:col-span-2 xl:!grid-cols-1 xl:col-span-1",children:[e.jsx(oe,{cb_setImage:j=>{r(j)},userInfo:s}),e.jsxs("div",{className:"widgets-grid",children:[e.jsx(pe,{}),e.jsx(me,{userInfo:s})]})]}),e.jsx(de,{avatar:m,userInfo:s})]})]})};export{Ce as default};
